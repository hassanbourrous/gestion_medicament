import{J as D}from"./JigLayout.de448839.js";import{J as k}from"./ConfirmationModal.076d1b58.js";import{J as F}from"./DialogModal.12166fb1.js";import{I as C}from"./InertiaButton.18e5489b.js";import{D as I,J,a as P}from"./DtComponent.3ba239b7.js";import{D as S}from"./DisplayMixin.328c366f.js";import N from"./ShowForm.763656e1.js";import{K as R,e as n,o as m,f as p,w as l,g as t,k as i,j as h,i as f,C as _,n as a,t as U}from"./vendor.faa38336.js";import{J as B}from"./Label.b121d9c9.js";import{I as L}from"./InfiniteSelect.ea8cf2aa.js";import{_ as V}from"./plugin-vue_export-helper.5a098b48.js";import"./ApplicationLogo.d162e8a5.js";import"./main.5bc2c5ec.js";import"./JigDd.3af5bc62.js";const A={name:"Index",components:{DtComponent:I,JigToggle:J,InertiaButton:C,JetConfirmationModal:k,JetDialogModal:F,JigModal:P,JigLayout:D,ShowUsersForm:N,JetLabel:B,InfiniteSelect:L},props:{can:Object,columns:Array},inject:["$refreshDt","$dayjs"],data(){return{tableId:"users-dt",tableParams:{role_id:null},datatable:null,confirmDelete:!1,currentModel:null,withDisabled:!1,showModal:!1,filters_expanded:!1,tableParamsForm:R({role:null},{remember:!1})}},mixins:[S],mounted(){},computed:{ajaxUrl(){return new URL(this.route("api.users.dt")).href}},methods:{showModel(o){axios.get(route("api.users.show",o)).then(e=>{this.currentModel=e.data.payload,this.showModal=!0})},editModel(o){this.$inertia.visit(this.route("admin.users.edit",o.id))},expandFilters(){this.filters_expanded=!this.filters_expanded},confirmDeletion(o){this.currentModel=o,this.confirmDelete=!0},cancelDelete(){this.currentModel=!1,this.confirmDelete=!1},async deleteModel(){const o=this;this.confirmDelete=!1,this.currentModel&&this.$inertia.delete(route("admin.users.destroy",o.currentModel),{onFinish:e=>{this.displayNotification("success","Item deleted."),o.$refreshDt(o.tableId)},onError:e=>{console.log(e),this.displayNotification("error","There was an error while deleting the item.")}})},async toggleActivation(o,e){console.log(o),axios.put(route("api.users.update",e.id),{enabled:o}).then(u=>{this.displayNotification("success",u.data.message),this.$refreshDt(this.tableId)})},selectedRoleFilter(){this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},submmitFilters(){this.tableParams.role_id=this.tableParamsForm.role?this.tableParamsForm.role.id:null,this.$refreshDt(this.tableId)},ResetFillters(){this.tableParams.role_id=null,this.tableParamsForm.role=null,this.$refreshDt(this.tableId)}}},E={class:"flex flex-wrap items-center justify-between w-full px-4"},O=t("i",{class:"fas fa-arrow-left"},null,-1),T=a(" Back"),z={class:"flex gap-x-2"},Y=t("i",{class:"fas fa-plus"},null,-1),K=a(" New User"),q=t("i",{class:"fas fa-redo"},null,-1),G=a(" Refresh"),H={key:0,class:"flex flex-wrap px-4"},Q={class:"z-10 flex-auto bg-white md:rounded-md md:shadow-md"},W={class:"w-full p-4 text-lg font-black sm:rounded-t-lg bg-primary-100"},X=t("i",{class:"mr-2 fas fa-bars"},null,-1),Z=a(" List des utilisateurs "),$=t("i",{class:"mr-2 fas fa-filter"},null,-1),ee=[$],te={key:0,class:"p-4 transition-all bg-indigo-50"},oe={class:"flex"},se={class:"flex-1 mr-2"},le={class:"w-full max-w-md"},ie={class:"flex-none"},re=a("Reset"),ae=a("Submit"),ne={class:"p-4"},de=t("div",null,"Are you sure you want to delete this record?",-1),ce={class:"flex justify-end gap-x-2"},me=a("Cancel"),ue=a("Yes, Delete"),fe={key:1},he=a("Close"),_e={key:1,class:"p-4 font-bold text-red-500 bg-red-100 rounded-md shadow-md"};function pe(o,e,u,be,s,r){const b=n("inertia-link"),c=n("inertia-button"),g=n("jet-label"),x=n("infinite-select"),w=n("dt-component"),y=n("jet-confirmation-modal"),v=n("show-users-form"),M=n("jig-modal"),j=n("jig-layout");return m(),p(j,{class:"bg-gray-100"},{header:l(()=>[t("div",E,[i(b,{href:o.route("admin.dashboard"),class:"text-xl font-black text-white"},{default:l(()=>[O,T]),_:1},8,["href"]),t("div",z,[u.can.create?(m(),p(c,{key:0,href:o.route("admin.users.create"),classes:"bg-green-100 hover:bg-green-200 text-primary"},{default:l(()=>[Y,K]),_:1},8,["href"])):h("",!0),i(c,{onClick:e[0]||(e[0]=d=>r.$refreshDt(s.tableId)),classes:"bg-indigo-100 hover:bg-green-200 text-indigo"},{default:l(()=>[q,G]),_:1})])])]),default:l(()=>[u.can.viewAny?(m(),f("div",H,[t("div",Q,[t("h3",W,[X,Z,t("button",{style:{"margin-top":"-5px"},type:"button",onClick:e[1]||(e[1]=d=>r.expandFilters()),class:"float-right pl-2 pt-1 pb-1 pr-1 bg-primary text-white rounded hover:bg-primary-700 hover:shadow-lg focus:bg-primary-700 focus:shadow-lg active:bg-primary-800 active:shadow-lg transition duration-150 ease-in-out"},ee)]),s.filters_expanded?(m(),f("div",te,[t("form",{onSubmit:e[4]||(e[4]=_((...d)=>r.submmitFilters&&r.submmitFilters(...d),["prevent"]))},[t("div",oe,[t("div",se,[t("div",le,[i(g,{for:"role",value:"Role"}),i(x,{"per-page":15,"api-url":o.route("api.roles.index"),"onOption:selected":r.selectedRoleFilter,id:"role",name:"role",modelValue:s.tableParamsForm.role,"onUpdate:modelValue":e[2]||(e[2]=d=>s.tableParamsForm.role=d),label:"name"},null,8,["api-url","onOption:selected","modelValue"])])]),t("div",ie,[i(c,{type:"button",class:"mt-4 mr-4 text-white font-semibold bg-success disabled:opacity-25",onClick:e[3]||(e[3]=d=>r.ResetFillters())},{default:l(()=>[re]),_:1}),i(c,{type:"submit",class:"mt-4 mr-14 text-white font-semibold bg-primary disabled:opacity-25"},{default:l(()=>[ae]),_:1})])])],32)])):h("",!0),t("div",ne,[i(w,{"table-id":s.tableId,"ajax-url":r.ajaxUrl,columns:u.columns,"ajax-params":s.tableParams,onShowModel:r.showModel,onEditModel:r.editModel,onDeleteModel:r.confirmDeletion},null,8,["table-id","ajax-url","columns","ajax-params","onShowModel","onEditModel","onDeleteModel"])]),i(y,{title:"Confirm Deletion",show:s.confirmDelete},{content:l(()=>[de]),footer:l(()=>[t("div",ce,[i(c,{as:"button",type:"button",onClick:_(r.cancelDelete,["stop"]),class:"bg-red-500"},{default:l(()=>[me]),_:1},8,["onClick"]),i(c,{as:"button",type:"button",onClick:_(r.deleteModel,["prevent"]),class:"bg-green-500"},{default:l(()=>[ue]),_:1},8,["onClick"])])]),_:1},8,["show"]),s.showModal&&s.currentModel?(m(),f("div",fe,[i(M,{show:s.showModal,"corner-class":"rounded-lg","position-class":"align-middle",onClose:e[6]||(e[6]=d=>{s.currentModel=null,s.showModal=!1})},{title:l(()=>[a("Show User #"+U(s.currentModel.id),1)]),footer:l(()=>[i(c,{class:"px-4 text-white bg-primary",onClick:e[5]||(e[5]=d=>{s.showModal=!1,s.currentModel=null})},{default:l(()=>[he]),_:1})]),default:l(()=>[i(v,{model:s.currentModel},null,8,["model"])]),_:1},8,["show"])])):h("",!0)])])):(m(),f("div",_e," You are not authorized to view a list of Users "))]),_:1})}var Se=V(A,[["render",pe]]);export{Se as default};
