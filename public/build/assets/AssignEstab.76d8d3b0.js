import{J as C}from"./Label.f2ea9d50.js";import{I as E}from"./InertiaButton.da879e12.js";import{J as w}from"./InputError.ef5e9aea.js";import{J}from"./Checkbox.aee54e1d.js";import{J as I}from"./Input.b4df4bca.js";import{a8 as R,e as b,o as d,i as m,g as a,k as r,w as u,C as h,F as x,l as k,t as V,q as v,n as p}from"./vendor.7f465e53.js";import{D as $}from"./DisplayMixin.328c366f.js";import{_ as B}from"./plugin-vue_export-helper.5a098b48.js";const N={name:"AssignEstab",components:{InertiaButton:E,JetLabel:C,JetInputError:w,JetInput:I,JetCheckbox:J},props:{establishments:Object,user:{required:!0,type:Object}},created(){},mixins:[$],methods:{async toggleEstab(n){R.post(this.route("api.users.assign-establishment",this.user.id),{establishment:n}).then(e=>{this.$emit("toggle-success",e.data.message)}).catch(e=>{var s,o;this.$emit("toggle-error",((o=(s=e.response)==null?void 0:s.data)==null?void 0:o.message)||e.message||e)})},async toggleAll(n){const e=this;for(const s in e.establishments){if(!e.establishments.hasOwnProperty(s))return!1;let o=e.establishments[s];await e.togglerRegionEstabs(o,n)}this.displayNotification("success",`All establishments have been ${n?"Assigned.":"Revoked."}`)},async togglerRegionEstabs(n,e){const s=this;for(const o in n){if(!n.hasOwnProperty(o))return!1;let l=n[o];l.checked&&!e?(l.checked=!1,await s.toggleEstab(l)):e&&!l.checked&&(l.checked=!0,await s.toggleEstab(l))}this.displayNotification("success",`All establishments in the region have been ${e?"Assigned.":"Revoked."}`)}}},D={class:"font-black text-xl mb-2 flex flex-wrap justify-between items-center"},O=a("h2",{class:""},"Assign Establishments",-1),L=p("Assign All"),M=p("Revoke All"),q=a("hr",null,null,-1),F={class:"p-4 mt-2 md:grid grid-cols-2 border rounded"},P={class:"flex flex-wrap"},U={class:"font-black text-xl pb-2"},z={class:""},S=p("Assign"),T=p("Revoke");function G(n,e,s,o,l,i){const g=b("inertia-button"),y=b("jet-checkbox"),j=b("jet-label");return d(),m("div",null,[a("div",D,[O,a("div",null,[r(g,{class:"bg-green-500",type:"button",onClick:e[0]||(e[0]=h(c=>i.toggleAll(!0),["prevent"]))},{default:u(()=>[L]),_:1}),r(g,{class:"bg-red-500 text-white",type:"button",onClick:e[1]||(e[1]=h(c=>i.toggleAll(!1),["prevent"]))},{default:u(()=>[M]),_:1})])]),q,a("div",F,[(d(!0),m(x,null,k(s.establishments,(c,f)=>(d(),m("div",{key:f,class:"border-b-2 mb-2"},[a("div",P,[a("h3",U,V(f),1),a("div",z,[r(g,{onClick:h(t=>i.togglerRegionEstabs(c,!0),["prevent"]),class:"bg-green-500 py-1 mx-1 text-sm"},{default:u(()=>[S]),_:2},1032,["onClick"]),r(g,{onClick:h(t=>i.togglerRegionEstabs(c,!1),["prevent"]),class:"bg-red-500 py-1 mx-1 text-sm"},{default:u(()=>[T]),_:2},1032,["onClick"])])]),(d(!0),m(x,null,k(c,(t,A)=>(d(),m("div",{style:{cursor:"pointer"},key:A,class:"sm:col-span-4 px-10 flex border-b border-gray-100 py-3 items-center my-2 text-gray-600"},[r(y,{onChange:_=>i.toggleEstab(t),class:v(["p-2 inline-block",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":!t.checked}]),type:"checkbox",id:t.name,name:t.name,checked:!!t.checked,modelValue:t.checked,"onUpdate:modelValue":_=>t.checked=_},null,8,["onChange","id","name","checked","modelValue","onUpdate:modelValue","class"]),r(j,{style:{cursor:"pointer"},for:t.name,class:v(["text-gray-400 hover:text-gray-600","inline-block font-black text-xl ml-3"]),value:t.name},null,8,["for","value"])]))),128))]))),128))])])}var te=B(N,[["render",G]]);export{te as default};
