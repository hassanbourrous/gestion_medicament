import{J as V}from"./Input.7c4ec79d.js";import{I as k}from"./InfiniteSelect.c9ff1f6a.js";import{J as j}from"./Label.a372a458.js";import{I as q}from"./InertiaButton.1210d7ec.js";import{J as C}from"./InputError.ec1a52bd.js";import{p as S,e as u,o as a,i as l,k as r,q as m,w as c,n as b,t as y,g,z as w,a6 as U,j as d,f as p,C as M,s as $}from"./vendor.688b8fb8.js";import{J as I}from"./JigDatepicker.1dee0bee.js";import{_ as J}from"./plugin-vue_export-helper.5a098b48.js";import"./vue-flatpickr.min.89b53b8f.js";import"./main.da06542b.js";const D=S({name:"ManageStockForm",components:{InertiaButton:q,JetInputError:C,JetLabel:j,JetInput:V,InfiniteSelect:k,JigDatepicker:I},props:{form:Object,user_establishment:Array,has_administrator:Boolean},data(){return{validated:!1,classObject:{changed_h:"h-72"}}},mounted(){this.form.estum=this.user_establishment[0]},computed:{flash(){return this.$page.props.flash||{}}},methods:{async storeModel(){this.form.post(this.route("admin.stocks.store"),{onSuccess:e=>{this.flash.success?this.$emit("success",this.flash.success):this.flash.error?this.$emit("error",this.flash.error):this.$emit("error","Unknown server error.")},onError:e=>{this.$emit("error","A server error occurred")}},{remember:!1,preserveState:!0})},onTypeChange(e){e.target.value!=""&&(this.classObject.changed_h="h-96",e.target.value=="consommation"?this.form.code_label="N\xB0 Ordonnance":e.target.value=="achats"?this.form.code_label="Bon d'achat":e.target.value=="detruit"?this.form.code_label="N\xB0 PV":this.form.code_label="N\xB0 Bulletin")},selectedEtabChnaged(){this.form.etab=null,this.form.detaine=null,this.form.medicament=null,this.form.stock=null},selectedMedicamentChnaged(){this.form.stock=null,this.form.quantite=0},selectedStockChnaged(){this.form.quantite=0}}}),P={key:0,class:"mt-2 sm:col-span-4"},B={key:1,class:"mt-3 sm:col-span-4"},N={class:"mt-3 sm:col-span-4"},E=$('<option value="" data-v-4a7f8382>Select Action type ...</option><option value="dr_provenance" data-v-4a7f8382>Provenance de la DR </option><option value="etab_provenance" data-v-4a7f8382>Provenance d&#39;un \xE9tablissement</option><option value="achats" data-v-4a7f8382>Achats</option><option value="etab_transfere" data-v-4a7f8382>Envoy\xE9 \xE0 un \xE9tablissment</option><option value="consommation" data-v-4a7f8382>Consommation</option><option value="detruit" data-v-4a7f8382>D\xE9truit</option>',7),A=[E],O={key:2,class:"mt-3 sm:col-span-4"},T={key:3,class:"mt-3 sm:col-span-4"},Y={key:4,class:"mt-3 sm:col-span-4"},F={key:5,class:"mt-3 sm:col-span-4"},z={key:6,class:"mt-3 sm:col-span-4"},L={key:7,class:"sm:col-span-4"},R={key:8,class:"mt-3 sm:col-span-4"},Q={key:9,class:"mt-3 sm:col-span-4"},G={key:10,class:"mt-3 sm:col-span-4"},H={key:11,class:"mt-3 sm:col-span-4"},K={class:"mt-2 text-right"},W=b("Submit");function X(e,o,Z,_,x,ee){const t=u("jet-label"),i=u("infinite-select"),n=u("jet-input-error"),f=u("jet-input"),v=u("jig-datepicker"),h=u("inertia-button");return a(),l("form",{class:m(["w-99 min-w-full",e.classObject]),onSubmit:o[18]||(o[18]=M((...s)=>e.storeModel&&e.storeModel(...s),["prevent"]))},[e.has_administrator||e.user_establishment.length>1?(a(),l("div",P,[r(t,{for:"estum",value:"\xC9tablissement"}),r(i,{"per-page":15,"api-url":e.route("api.establishments.index"),"onUpdate:modelValue":[o[0]||(o[0]=s=>e.selectedEtabChnaged()),o[1]||(o[1]=s=>e.form.estum=s)],id:"estum",name:"estum",modelValue:e.form.estum,label:"name",class:m({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.estum})},null,8,["api-url","modelValue","class"]),r(n,{message:e.form.errors.estum,class:"mt-2"},null,8,["message"])])):(a(),l("div",B,[r(t,{for:"estum",value:"\xC9tablissement"}),r(t,{for:"estum",class:"font-bold ml-4"},{default:c(()=>[b(y(e.form.estum?e.form.estum.name:"!"),1)]),_:1}),r(f,{class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.estum}]),type:"hidden",id:"estum",name:"estum",modelValue:e.form.estum,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.estum=s)},null,8,["modelValue","class"]),r(n,{message:e.form.errors.estum,class:"mt-2"},null,8,["message"])])),g("div",N,[r(t,{for:"type",value:"Type d'Action"}),w(g("select",{class:m(["w-full cost_select",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.type}]),"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.type=s),id:"type",name:"type",onChange:o[4]||(o[4]=s=>e.onTypeChange(s))},A,34),[[U,e.form.type]]),r(n,{message:e.form.errors.type,class:"mt-2"},null,8,["message"])]),e.form.type=="dr_provenance"?(a(),l("div",O,[r(t,{for:"region",value:"R\xE9gion l'exp\xE9diteur"}),r(i,{"per-page":15,"api-url":e.route("api.regions.index"),id:"region",name:"region",modelValue:e.form.region,"onUpdate:modelValue":o[5]||(o[5]=s=>e.form.region=s),label:"name",class:m({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.region})},null,8,["api-url","modelValue","class"]),r(n,{message:e.form.errors.region,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type=="etab_provenance"||e.form.type=="etab_transfere"?(a(),l("div",T,[e.form.type=="etab_provenance"?(a(),p(t,{key:0,for:"etab",value:"\xC9tablissement l'exp\xE9diteur"})):d("",!0),e.form.type=="etab_transfere"?(a(),p(t,{key:1,for:"etab",value:"\xC9tablissement destinataire"})):d("",!0),r(i,{"per-page":15,"api-url":e.route("api.establishments.index"),queryParams:{all:!0,deferent_then:e.form.estum?e.form.estum.id:null},id:"etab",name:"etab",reaictivo:!0,modelValue:e.form.etab,"onUpdate:modelValue":o[6]||(o[6]=s=>e.form.etab=s),label:"name",class:m({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.etab})},null,8,["api-url","queryParams","modelValue","class"]),r(n,{message:e.form.errors.etab,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type=="consommation"?(a(),l("div",Y,[r(t,{for:"detaine",value:"Detenu"}),r(i,{"per-page":15,"api-url":e.route("api.detainees.index"),queryParams:{selected_etab:e.form.estum?e.form.estum.id:null},id:"detaine",name:"detaine",reaictivo:!0,modelValue:e.form.detaine,"onUpdate:modelValue":o[7]||(o[7]=s=>e.form.detaine=s),label:"title",class:m({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.detaine})},null,8,["api-url","queryParams","modelValue","class"]),r(n,{message:e.form.errors.detaine,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type!=""?(a(),l("div",F,[r(t,{for:"ordonnance"},{default:c(()=>[b(y(e.form.code_label),1)]),_:1}),r(f,{class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.ordonnance}]),type:"text",id:"ordonnance",name:"ordonnance",modelValue:e.form.ordonnance,"onUpdate:modelValue":o[8]||(o[8]=s=>e.form.ordonnance=s)},null,8,["modelValue","class"]),r(n,{message:e.form.errors.ordonnance,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type!=""?(a(),l("div",z,[r(t,{for:"medicament",value:"Medicament"}),r(i,{"per-page":15,"api-url":e.route("api.medicaments.index"),"onUpdate:modelValue":[o[9]||(o[9]=s=>e.selectedMedicamentChnaged()),o[10]||(o[10]=s=>e.form.medicament=s)],id:"medicament",name:"medicament",modelValue:e.form.medicament,label:"title",class:m({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.medicament})},null,8,["api-url","modelValue","class"]),r(n,{message:e.form.errors.medicament,class:"mt-2"},null,8,["message"])])):d("",!0),(e.form.type=="consommation"||e.form.type=="etab_transfere"||e.form.type=="detruit")&&e.form.medicament?(a(),l("div",L,[r(t,{for:"stock",value:"Stock"}),r(i,{"per-page":15,"api-url":e.route("api.stocks.index"),id:"stock",name:"stock",reaictivo:!0,"onUpdate:modelValue":[o[11]||(o[11]=s=>e.selectedStockChnaged()),o[12]||(o[12]=s=>e.form.stock=s)],queryParams:{selected_etab:e.form.estum?e.form.estum.id:null,medicaments_id:e.form.medicament?e.form.medicament.id:null},modelValue:e.form.stock,label:"title",class:m({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.stock})},null,8,["api-url","queryParams","modelValue","class"]),r(n,{message:e.form.errors.stock,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type=="etab_provenance"||e.form.type=="dr_provenance"||e.form.type=="achats"?(a(),l("div",R,[r(t,{for:"date_production",value:"Date de Production"}),r(v,{class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.date_production}]),id:"date_production",name:"date_production",modelValue:e.form.date_production,"onUpdate:modelValue":o[13]||(o[13]=s=>e.form.date_production=s),"data-date-format":"Y-m-d","data-alt-input":!0,"data-alt-format":"l M J, Y"},null,8,["modelValue","class"]),r(n,{message:e.form.errors.date_production,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type=="etab_provenance"||e.form.type=="dr_provenance"||e.form.type=="achats"?(a(),l("div",Q,[r(t,{for:"date_dexpiration",value:"Date D'expiration"}),r(v,{class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.date_dexpiration}]),id:"date_dexpiration",name:"date_dexpiration",modelValue:e.form.date_dexpiration,"onUpdate:modelValue":o[14]||(o[14]=s=>e.form.date_dexpiration=s),"data-date-format":"Y-m-d","data-alt-input":!0,"data-alt-format":"l M J, Y"},null,8,["modelValue","class"]),r(n,{message:e.form.errors.date_dexpiration,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type!=""?(a(),l("div",G,[r(t,{for:"quantite",value:"Quantite"}),(e.form.type=="consommation"||e.form.type=="etab_transfere"||e.form.type=="detruit")&&e.form.medicament&&e.form.stock?(a(),p(f,{key:0,class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.quantite}]),type:"number",min:"1",max:e.form.stock.quantite,step:"1",id:"quantite",name:"quantite",modelValue:e.form.quantite,"onUpdate:modelValue":o[15]||(o[15]=s=>e.form.quantite=s)},null,8,["max","modelValue","class"])):(a(),p(f,{key:1,class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.quantite}]),type:"number",min:"1",step:"1",id:"quantite",name:"quantite",modelValue:e.form.quantite,"onUpdate:modelValue":o[16]||(o[16]=s=>e.form.quantite=s)},null,8,["modelValue","class"])),r(n,{message:e.form.errors.quantite,class:"mt-2"},null,8,["message"])])):d("",!0),e.form.type!=""?(a(),l("div",H,[r(t,{for:"comment",value:"Comment"}),r(f,{class:m(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.comment}]),type:"text",id:"comment",name:"comment",modelValue:e.form.comment,"onUpdate:modelValue":o[17]||(o[17]=s=>e.form.comment=s)},null,8,["modelValue","class"]),r(n,{message:e.form.errors.comment,class:"mt-2"},null,8,["message"])])):d("",!0),g("div",K,[r(h,{type:"submit",class:"font-semibold bg-success disabled:opacity-25",disabled:e.form.processing},{default:c(()=>[W]),_:1},8,["disabled"])])],34)}var ue=J(D,[["render",X],["__scopeId","data-v-4a7f8382"]]);export{ue as default};
