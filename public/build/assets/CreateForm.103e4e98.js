import{J as y}from"./JigDatepicker.e9d1ad0e.js";import{J as j}from"./Input.ff5f863b.js";import{J as P}from"./Label.b121d9c9.js";import{I as V}from"./InertiaButton.18e5489b.js";import{J as k}from"./InputError.830002e3.js";import{p as $,e as n,o as h,i as C,g as t,k as s,q as i,z as b,B as v,Y as I,w as d,C as u,f as S,j as J,n as f}from"./vendor.faa38336.js";import{J as B}from"./SecondaryButton.d07816ca.js";import{I as N}from"./InfiniteSelect.ea8cf2aa.js";import{_ as U}from"./plugin-vue_export-helper.5a098b48.js";import"./vue-flatpickr.min.fb0f0e25.js";import"./main.bae80a72.js";const F=$({name:"CreateDetaineesForm",components:{InertiaButton:V,JetInputError:k,JetLabel:P,JigDatepicker:y,JetInput:j,JetSecondaryButton:B,InfiniteSelect:N},data(){return{form:this.$inertia.form({first_name:null,last_name:null,establishment:null,cin:null,code:null,profile_photo_path:null,photo:null,birthday:null},{remember:!1}),photoPreview:null}},mounted(){},computed:{flash(){return this.$page.props.flash||{}}},methods:{async storeModel(){this.$refs.photo&&(this.form.photo=this.$refs.photo.files[0]),this.form.post(this.route("admin.detainees.store"),{onSuccess:e=>{this.flash.success?(this.clearPhotoFileInput(),this.$emit("success",this.flash.success)):this.flash.error?this.$emit("error",this.flash.error):this.$emit("error","Unknown server error.")},onError:e=>{this.$emit("error","A server error occurred")}},{remember:!1,preserveState:!0})},selectNewPhoto(){this.$refs.photo.click()},updatePhotoPreview(){const e=this.$refs.photo.files[0];if(!e)return;const o=new FileReader;o.onload=p=>{this.photoPreview=p.target.result},o.readAsDataURL(e)},deletePhoto(){this.$inertia.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{this.photoPreview=null,this.clearPhotoFileInput()}})},clearPhotoFileInput(){var e;((e=this.$refs.photo)==null?void 0:e.value)&&(this.$refs.photo.value=null)}}}),D={class:"sm:col-span-4"},M={class:"sm:col-span-4"},z={class:"sm:col-span-4"},E={class:"sm:col-span-4"},L={class:"sm:col-span-4"},A={class:"sm:col-span-4"},R={class:"sm:col-span-4"},Y={class:"mt-2"},q=["src","alt"],T={class:"mt-2"},G=f(" Select A New Photo "),H=f(" Remove Photo "),K={class:"mt-2 text-right"},O=f("Submit");function Q(e,o,p,W,X,Z){const a=n("jet-label"),m=n("jet-input"),l=n("jet-input-error"),g=n("infinite-select"),_=n("jig-datepicker"),c=n("jet-secondary-button"),w=n("inertia-button");return h(),C("form",{class:"w-full",onSubmit:o[7]||(o[7]=u((...r)=>e.storeModel&&e.storeModel(...r),["prevent"]))},[t("div",D,[s(a,{for:"first_name",value:"First Name"}),s(m,{class:i(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.first_name}]),type:"text",id:"first_name",name:"first_name",modelValue:e.form.first_name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.form.first_name=r)},null,8,["modelValue","class"]),s(l,{message:e.form.errors.first_name,class:"mt-2"},null,8,["message"])]),t("div",M,[s(a,{for:"last_name",value:"Last Name"}),s(m,{class:i(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.last_name}]),type:"text",id:"last_name",name:"last_name",modelValue:e.form.last_name,"onUpdate:modelValue":o[1]||(o[1]=r=>e.form.last_name=r)},null,8,["modelValue","class"]),s(l,{message:e.form.errors.last_name,class:"mt-2"},null,8,["message"])]),t("div",z,[s(a,{for:"establishment",value:"establishment"}),s(g,{"per-page":15,"api-url":e.route("api.establishments.index"),id:"establishment",name:"establishment",modelValue:e.form.establishment,"onUpdate:modelValue":o[2]||(o[2]=r=>e.form.establishment=r),label:"name",class:i({"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.establishment})},null,8,["api-url","modelValue","class"]),s(l,{message:e.form.errors.establishment,class:"mt-2"},null,8,["message"])]),t("div",E,[s(a,{for:"cin",value:"Cin"}),s(m,{class:i(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.cin}]),type:"text",id:"cin",name:"cin",modelValue:e.form.cin,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.cin=r)},null,8,["modelValue","class"]),s(l,{message:e.form.errors.cin,class:"mt-2"},null,8,["message"])]),t("div",L,[s(a,{for:"code",value:"Code"}),s(m,{class:i(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.code}]),type:"text",id:"code",name:"code",modelValue:e.form.code,"onUpdate:modelValue":o[4]||(o[4]=r=>e.form.code=r)},null,8,["modelValue","class"]),s(l,{message:e.form.errors.code,class:"mt-2"},null,8,["message"])]),t("div",A,[s(a,{for:"birthday",value:"Birthday"}),s(_,{class:i(["w-full",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":e.form.errors.birthday}]),id:"birthday",name:"birthday",modelValue:e.form.birthday,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.birthday=r),"data-date-format":"Y-m-d","data-alt-input":!0,"data-alt-format":"l M J, Y"},null,8,["modelValue","class"]),s(l,{message:e.form.errors.birthday,class:"mt-2"},null,8,["message"])]),t("div",R,[t("input",{type:"file",class:"hidden",ref:"photo",onChange:o[6]||(o[6]=(...r)=>e.updatePhotoPreview&&e.updatePhotoPreview(...r))},null,544),s(a,{for:"photo",value:"Photo"}),b(t("div",Y,[t("img",{src:e.form.profile_photo_path,alt:e.form.first_name,class:"rounded-full h-20 w-20 object-cover"},null,8,q)],512),[[v,!e.photoPreview]]),b(t("div",T,[t("span",{class:"block rounded-full w-20 h-20",style:I("background-size: cover; background-repeat: no-repeat; background-position: center center; background-image: url('"+e.photoPreview+"');")},null,4)],512),[[v,e.photoPreview]]),s(c,{class:"mt-2 mr-2",type:"button",onClick:u(e.selectNewPhoto,["prevent"])},{default:d(()=>[G]),_:1},8,["onClick"]),e.form.profile_photo_path?(h(),S(c,{key:0,type:"button",class:"mt-2",onClick:u(e.deletePhoto,["prevent"])},{default:d(()=>[H]),_:1},8,["onClick"])):J("",!0),s(l,{message:e.form.errors.photo,class:"mt-2"},null,8,["message"])]),t("div",K,[s(w,{type:"submit",class:"font-semibold bg-success disabled:opacity-25",disabled:e.form.processing},{default:d(()=>[O]),_:1},8,["disabled"])])],32)}var de=U(F,[["render",Q]]);export{de as default};
