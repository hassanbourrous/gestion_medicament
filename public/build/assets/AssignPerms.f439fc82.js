import{J as P}from"./Label.b121d9c9.js";import{I as w}from"./InertiaButton.18e5489b.js";import{J as A}from"./InputError.830002e3.js";import{J}from"./Checkbox.c30c8286.js";import{J as V}from"./Input.ff5f863b.js";import{a8 as $,e as h,o as d,i as m,g as n,k as l,w as p,C as g,F as x,l as v,t as I,q as k,n as f}from"./vendor.faa38336.js";import{D as B}from"./DisplayMixin.328c366f.js";import{_ as N}from"./plugin-vue_export-helper.5a098b48.js";const q={name:"AssignPerms",components:{InertiaButton:w,JetLabel:P,JetInputError:A,JetInput:V,JetCheckbox:J},props:{permissions:Object,role:{required:!0,type:Object}},mixins:[B],methods:{async togglePerm(o){$.post(this.route("api.roles.assign-permission",this.role.id),{permission:o}).then(e=>{this.$emit("toggle-success",e.data.message)}).catch(e=>{var s,r;this.$emit("toggle-error",((r=(s=e.response)==null?void 0:s.data)==null?void 0:r.message)||e.message||e)})},async toggleAll(o){const e=this;for(const s in e.permissions){if(!e.permissions.hasOwnProperty(s))return!1;let r=e.permissions[s];await e.togglePermGroup(r,o)}this.displayNotification("success",`All permissions have been ${o?"Assigned.":"Revoked."}`)},async togglePermGroup(o,e){const s=this;for(const r in o){if(!o.hasOwnProperty(r))return!1;let i=o[r];i.checked&&!e?(i.checked=!1,await s.togglePerm(i)):e&&!i.checked&&(i.checked=!0,await s.togglePerm(i))}this.displayNotification("success",`All permissions in the group have been ${e?"Assigned.":"Revoked."}`)}}},D={class:"font-black text-xl mb-2 flex flex-wrap justify-between items-center"},O=n("h2",{class:""},"Affecter des Permissions",-1),R=f("Attribuer Tout"),E=f("R\xE9voquer Tout"),G=n("hr",null,null,-1),L={class:"p-4 mt-2 md:grid grid-cols-2 border rounded"},M={class:"flex flex-wrap"},T={class:"font-black text-xl pb-2"},F={class:""},U=f("Attribuer"),z=f("R\xE9voquer");function K(o,e,s,r,i,a){const u=h("inertia-button"),y=h("jet-checkbox"),j=h("jet-label");return d(),m("div",null,[n("div",D,[O,n("div",null,[l(u,{class:"bg-green-500",type:"button",onClick:e[0]||(e[0]=g(c=>a.toggleAll(!0),["prevent"]))},{default:p(()=>[R]),_:1}),l(u,{class:"bg-red-500 text-white",type:"button",onClick:e[1]||(e[1]=g(c=>a.toggleAll(!1),["prevent"]))},{default:p(()=>[E]),_:1})])]),G,n("div",L,[(d(!0),m(x,null,v(s.permissions,(c,b)=>(d(),m("div",{key:b,class:"border-b-2 mb-2"},[n("div",M,[n("h3",T,I(b),1),n("div",F,[l(u,{onClick:g(t=>a.togglePermGroup(c,!0),["prevent"]),class:"bg-green-500 py-1 mx-1 text-sm"},{default:p(()=>[U]),_:2},1032,["onClick"]),l(u,{onClick:g(t=>a.togglePermGroup(c,!1),["prevent"]),class:"bg-red-500 py-1 mx-1 text-sm"},{default:p(()=>[z]),_:2},1032,["onClick"])])]),(d(!0),m(x,null,v(c,(t,C)=>(d(),m("div",{style:{cursor:"pointer"},key:C,class:"sm:col-span-4 px-10 flex border-b border-gray-100 py-3 items-center my-2 text-gray-600"},[l(y,{onChange:_=>a.togglePerm(t),class:k(["p-2 inline-block",{"border-red-500 sm:focus:border-red-300 sm:focus:ring-red-100":!t.checked}]),type:"checkbox",id:t.name,name:t.name,checked:!!t.checked,modelValue:t.checked,"onUpdate:modelValue":_=>t.checked=_},null,8,["onChange","id","name","checked","modelValue","onUpdate:modelValue","class"]),l(j,{style:{cursor:"pointer"},for:t.name,class:k(["text-gray-400 hover:text-gray-600","inline-block font-black text-xl ml-3"]),value:t.title},null,8,["for","value"])]))),128))]))),128))])])}var te=N(q,[["render",K]]);export{te as default};
